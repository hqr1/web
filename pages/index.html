<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/index.css">
    <script type="text/javascript" src="../js/animate.js"></script>
    <link rel="import" href="header.html" id="common_Head">
    <title>中医药文化宣传门户</title>
    <style>

    </style>
</head>

<body>
    <script src="../js/include.js"></script>
    <!-- 头部导航栏 -->
        <include src="components/header.html" ></include>
    <!-- 主内容 -->
    <main>
        <!-- 轮播图部分 -->
        <section>
            <div class="lunboBox">
                <div class="left">
                    <a href="javascript:;"><</a>
                </div>
                <div class="right">
                    <a href="javascript:;">></a>
                </div>
                <ul class="img">
                    <li>
                        <div class="imgDiv">
                        <img class="lunboImg" src="../img/lunbo1.jfif" alt="" style="object-fit:cover;" >
                        </div>
                   </li>
                    <li>
                        <div class="imgDiv">
                        <img class="lunboImg" src="../img/lunbo2.jpg" alt="" style="object-fit:cover;">
                       </div>
                    </li>
                    <li>
                        <div class="imgDiv">
                        <img class="lunboImg" src="../img/lunbo3.jpg" alt="">
                        </div>
                    </li>
                    <li>
                        <div class="imgDiv">
                        <img class="lunboImg" src="../img/lunbo4.jfif" alt="">
                </div>
                </li>
                </ul>
                <ol class="circle">
                </ol>
            </div>
        </section>
        <!-- 发展简介 -->
        <section class="dev">
            <h2>中医文化发展</h2>
            <div class="more">
                <a href="history/index.html"><span>了解更多 ></span></a>
            </div>           
            <hr>         
                <div class="box">
                <ul id="first-list">
                    <li>
                        <span></span>
                        <div class="title">远古时期
                         </div>
                          <div class="time">
                            <span> 公元前2200年</span>
                        </div>
                        <div class="info">在这时期，中国版图上已形成不同的部落，起初始祖居民穴居野外，为生存必须与自然界斗争。</div>
                       
                    </li>
                    <li>
                        <span></span>
                        <div class="title">商代</div>
                         <div class="time">
                            <span>公元前1700-1100年</span>
                        </div>
                        <div class="info">商人认为自己的存在与天地万物关系密切，大家所处的位置是，天堂在头上，地球在脚下，而人在两者之间。 </div>
                       
                    </li>
                    <li>
                        <span></span>
                        <div class="title">周朝</div>
                          <div class="time">
                            <span>约公元前1100-221年</span>
                        </div>
                        <div class="info">周朝医药当比商代为进步，但皆集中在王宫，并已有制度。</div>
                      
                    </li>
                </div> 
                </ul>
            </div>
        </section>
        <!-- 名著和非遗小卡片展示 -->
        <section class="showPart">
            <div class="masterPiece">
                <div class="headerPart">
                    <div class="title">名著.阅读                   
                    </div>
                    <div class="more">
                        <a href="masterpiece/index.html"><span>更多 ></span></a>
                    </div>
                </div>

                <ul>
                    <li><a href="masterpiece/index.html">
                        <div class="bookImg"></div>
                        <div class="content">
                            <h4>《伤寒杂病论》</h4>
                            <span>
                                《伤寒杂病论》是中国传统医学著作之一，是一部论述外感病与内科杂病为主要内容的医学典籍，作者是东汉末年张仲景，是中国中医院校开设的主要基础课程之一。
                            </span>
                            </div></a>
                    </li>
                    <li><a href="masterpiece/index.html">《本草纲目》|载有药物1892种，收集医方11096个</a> </li>
                    <li><a href="masterpiece/index.html">《神农本草经》|一本综合性的医书，在黄老道家理论上建立了中医学上的“阴阳五行学说”等学说</a></li>
                    <li><a href="masterpiece/index.html">《难经》|最早的问答医学著作</a></li>
                    <li><a href="masterpiece/index.html">《脉经》|首部脉学专著</a></li>
                    <li><a href="masterpiece/index.html">《针灸甲乙经》|前六卷论述基础理论，依次叙述人体的生理功能，包括五脏六腑、营卫气血、精神魂魄、精气津液及肢体五官与脏腑功能的关系等</a></li>
                </ul>
            </div>
            <div class="item">
                <div class="headerPart">
                    <div class="title">非遗项目                  
                    </div>
                    <div class="more">
                        <a href="intangibleHeritage/index.html"><span>更多 ></span></a>
                    </div>
                </div>
                <ul>
                    <li>
                        <a href="intangibleHeritage/index.html">
                        <div class="bookImg"></div>
                        <div class="content">
                            <h4>针灸铜人</h4>
                            <span>
                                《2010年，中医针灸成功入选联合国教科文组织“人类非物质文化遗产代表作名录”。
                            </span>
                            </div></a>
                    </li>
                    <li><a href="intangibleHeritage/index.html">中药炮制|中药炮制是指在中医理论的指导下，按中医用药要求将中药材加工成中药饮片的传统方法和技术</a> </li>
                    <li><a href="intangibleHeritage/index.html">中医养生|中医养生学以传统中医学的理论和古代哲学思想为指导</a></li>
                    <li><a href="intangibleHeritage/index.html">艾灸|艾灸，乃中国最古老的医术之一，属中医外治法。</a></li>
                    <li><a href="intangibleHeritage/index.html">王老吉迈出“时尚中药”大健康</a></li>
                    <li><a href="intangibleHeritage/index.html">藏医药浴法——中国藏族有关生命健康和疾病防治的知识与实践</a></li>
                </ul>
            </div>
        </section>
        <section></section>
    </main>
    <!-- 底部 -->
    <footer>
        <include src="components/footer.html" ></include>
    </footer>
</body>
<script>
    // 本地存储第0页
       window.localStorage.setItem("pageIndex",0)
         // 获取元素
         var left = document.querySelector('.left');
            var right = document.querySelector('.right');
            var box = document.querySelector('.lunboBox');
            var circle = document.querySelector('.circle');
            var img = document.querySelector('.img');
            var focus = box.offsetWidth;
            var num = 0;
            // 鼠标经过focus 就显示隐藏左右按钮
            box.addEventListener('mouseenter',function() {
               left.style.display = 'block';
               right.style.display = 'block';
               clearInterval(timer);
               timer = null;// 清除定时器变量
             })
            // 鼠标离开隐藏左右按钮 
            box.addEventListener('mouseleave',function() {
                left.style.display = 'none';
                right.style.display = 'none';
                timer = setInterval(function() {
                    right.click();//手动调用点击事件
                },1500)
            })
            // 动态生成小圆圈  有几张图片，就生成几个小圆圈
            for(var i = 0;i<img.children.length;i++)
            {
                var li = document.createElement('li');
                li.setAttribute('index',i);
                circle.appendChild(li);
                // 小圆圈的排他思想 我们可以直接在生成小圆圈的同时直接绑定点击事件
                li.addEventListener('click',function() {
                // 把所有的小li 清除 current 类名
                    for(var i = 0;i<circle.children.length;i++)
                    {
                        circle.children[i].className = '';
                    }
                    // 当前的小li 设置current 类名
                    this.className = 'current';
                    // ul 的移动距离 小圆圈的索引号 乘以 图片的宽度 注意是负值
                     // 当点击了某个小li 就拿到当前小li 的索引号
                    var index = this.getAttribute('index');
                    // num记录li 的索引号 
                    num = index;
                    animate(img,-index*focus);
                })
                
            }
            // 把ol里面的第一个小li设置类名为 current
            circle.children[0].className = 'current';
            //克隆第一张图片(li)放到ul 最后面
            var first = img.children[0].cloneNode(true);
            img.appendChild(first);
            var flag = true;//节流阀(防止轮播图点击速度过快）
            // 点击右侧按钮， 图片滚动一张
            right.addEventListener('click',function() {
                if(flag){
                    flag = false;
                    for(var i = 0;i<circle.children.length;i++)
                    {
                        circle.children[i].className = '';
                    }
                    // 如果走到了最后复制的一张图片，此时 ul 要快速复原 left 改为 0
                    if(num==img.children.length-1) 
                    {
                        img.style.left = 0;
                        num = 0;
                    }
                    num++;
                    animate(img,-num*focus,function() {
                            flag = true;
                    });
                    console.log(num)
                    if(num==img.children.length-1)
                    {
                        circle.children[0].className = 'current';
                    }
                    else{
                        circle.children[num].className = 'current';
                    }
                    
                    
                }
            });
             //左侧按钮做法
            left.addEventListener('click',function() {
                if(flag){
                    flag = false;
                    for(var i = 0;i<circle.children.length;i++)
                    {
                        circle.children[i].className = '';
                    }
                    if(num==0) 
                    {
                        num = img.children.length-1;
                        img.style.left = -num*focus + 'px';
                    }
                    num--;
                    animate(img,-num*focus,function() {
                            flag = true;
                    });
                    circle.children[num].className = 'current';
                }
            });
             // 自动播放轮播图
            var timer = setInterval(function() {
                right.click();
            },1500)
</script>
</html>